<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salesforce Health Cloud - AgentForce Console | October 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #00A1E0 0%, #16325C 100%); }
        .agentforce-glow { box-shadow: 0 0 20px rgba(0,161,224,0.3); }
        .ai-pulse { animation: pulse 2s infinite; }
        .task-high-priority { border-left: 4px solid #EF4444; background: linear-gradient(90deg, rgba(239,68,68,0.1) 0%, transparent 100%); }
        .task-medium-priority { border-left: 4px solid #F59E0B; background: linear-gradient(90deg, rgba(245,158,11,0.1) 0%, transparent 100%); }
        .task-low-priority { border-left: 4px solid #10B981; background: linear-gradient(90deg, rgba(16,185,129,0.1) 0%, transparent 100%); }
        .notification-slide { animation: slideIn 0.5s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        .status-completed { background-color: #D1FAE5; color: #065F46; }
        .status-in-progress { background-color: #DBEAFE; color: #1E40AF; }
        .status-pending { background-color: #FEF3C7; color: #92400E; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Salesforce Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                        <svg class="w-8 h-8 text-blue-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">Salesforce Health Cloud</h1>
                        <p class="text-blue-100">AgentForce Console â€¢ Patient Services</p>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="text-right">
                        <div class="text-sm text-blue-100">Agent</div>
                        <div class="text-lg font-semibold">Cindy Smith</div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-blue-100">Queue</div>
                        <div class="text-lg font-semibold">3 Active</div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full ai-pulse"></div>
                        <span class="text-sm">AgentForce AI Active</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 py-6">
        <!-- Demo Controls - Moved to Top -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-6 border-2 border-blue-200">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                <div class="flex flex-col sm:flex-row sm:items-center gap-4">
                    <h3 class="text-lg font-semibold text-gray-900">Demo Controls</h3>
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-gray-600">Step <span id="currentStep">3</span> of 12</span>
                        <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-2">
                    <button id="prevStep" class="bg-gray-100 text-gray-700 py-2 px-4 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center justify-center">
                        <i data-lucide="chevron-left" class="w-4 h-4 mr-1"></i>
                        <span>Previous</span>
                    </button>
                    <button id="nextStep" class="bg-blue-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center">
                        <span>Next Step</span>
                        <i data-lucide="chevron-right" class="w-4 h-4 ml-1"></i>
                    </button>
                </div>
            </div>
            
            <!-- Progress Indicators -->
            <div class="mt-4 grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-4">
                <div class="text-center">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2">
                        <i data-lucide="check" class="w-4 h-4 sm:w-6 sm:h-6 text-green-600"></i>
                    </div>
                    <div class="text-xs font-medium text-gray-900">Start Form</div>
                    <div class="text-xs text-gray-500">Completed</div>
                </div>
                <div class="text-center">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2">
                        <i data-lucide="check" class="w-4 h-4 sm:w-6 sm:h-6 text-green-600"></i>
                    </div>
                    <div class="text-xs font-medium text-gray-900">Covered Entity</div>
                    <div class="text-xs text-gray-500">Completed</div>
                </div>
                <div class="text-center">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2">
                        <i data-lucide="phone" class="w-4 h-4 sm:w-6 sm:h-6 text-blue-600"></i>
                    </div>
                    <div class="text-xs font-medium text-gray-900">Welcome Call</div>
                    <div class="text-xs text-blue-600">Active</div>
                </div>
                <div class="text-center">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2">
                        <i data-lucide="circle" class="w-4 h-4 sm:w-6 sm:h-6 text-gray-400"></i>
                    </div>
                    <div class="text-xs font-medium text-gray-900">Nurse Call</div>
                    <div class="text-xs text-gray-500">Pending</div>
                </div>
                <div class="text-center">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2">
                        <i data-lucide="circle" class="w-4 h-4 sm:w-6 sm:h-6 text-gray-400"></i>
                    </div>
                    <div class="text-xs font-medium text-gray-900">Site Locator</div>
                    <div class="text-xs text-gray-500">Pending</div>
                </div>
                <div class="text-center">
                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2">
                        <i data-lucide="circle" class="w-4 h-4 sm:w-6 sm:h-6 text-gray-400"></i>
                    </div>
                    <div class="text-xs font-medium text-gray-900">Benefits</div>
                    <div class="text-xs text-gray-500">Pending</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-6">
            
            <!-- Patient Queue (Left Sidebar) -->
            <div class="lg:col-span-1 order-2 lg:order-1">
                <!-- Dashboard & Alerts -->
                <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4">
                    <h3 class="font-semibold text-gray-900 mb-4 flex items-center">
                        <i data-lucide="bar-chart-3" class="w-4 h-4 mr-2 text-indigo-600"></i>
                        Dashboard & Alerts
                    </h3>
                    
                    <!-- Key Metrics -->
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-blue-50 rounded-lg p-3 text-center">
                            <div class="text-lg font-bold text-blue-600" id="activePatients">12</div>
                            <div class="text-xs text-gray-600">Active Patients</div>
                        </div>
                        <div class="bg-green-50 rounded-lg p-3 text-center">
                            <div class="text-lg font-bold text-green-600" id="completedCalls">8</div>
                            <div class="text-xs text-gray-600">Calls Today</div>
                        </div>
                    </div>
                    
                    <!-- Alerts -->
                    <div class="space-y-2 mb-4">
                        <div class="bg-red-50 border border-red-200 rounded-lg p-2">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="alert-triangle" class="w-4 h-4 text-red-600"></i>
                                <span class="text-sm font-medium text-red-800">2 Prior Auths Pending</span>
                            </div>
                        </div>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-2">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="clock" class="w-4 h-4 text-yellow-600"></i>
                                <span class="text-sm font-medium text-yellow-800">3 Infusions Scheduled</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reminders -->
                    <div class="bg-gray-50 rounded-lg p-3">
                        <h4 class="text-sm font-medium text-gray-700 mb-2">Today's Reminders</h4>
                        <div class="space-y-1 text-xs text-gray-600">
                            <div>â€¢ Follow up with Sarah Parker (2:00 PM)</div>
                            <div>â€¢ Review John Smith's PA status</div>
                            <div>â€¢ Schedule nurse education calls</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                        <i data-lucide="users" class="w-5 h-5 mr-2 text-blue-600"></i>
                        Patient Queue
                    </h2>
                    
                    <!-- New Patient Alert -->
                    <div id="newPatientAlert" class="bg-red-50 border border-red-200 rounded-lg p-3 mb-4 notification-slide">
                        <div class="flex items-center">
                            <i data-lucide="bell" class="w-4 h-4 text-red-600 mr-2"></i>
                            <div>
                                <div class="text-sm font-semibold text-red-800">New Patient!</div>
                                <div class="text-xs text-red-600">Sarah Parker - Start Form Received</div>
                            </div>
                        </div>
                    </div>

                    <!-- Patient List -->
                    <div class="space-y-3">
                        <div class="task-high-priority p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all">
                            <div class="flex items-center justify-between mb-2">
                                <div class="font-medium text-gray-900">Sarah Parker</div>
                                <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">HIGH</span>
                            </div>
                            <div class="text-sm text-gray-600">New MS Patient â€¢ Tysabri</div>
                            <div class="text-xs text-gray-500 mt-1">Start Form: Oct 20, 2:30 PM</div>
                            <div class="text-xs text-blue-600 mt-1">Patient ID: SP-2025-001</div>
                        </div>

                        <div class="task-medium-priority p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all">
                            <div class="flex items-center justify-between mb-2">
                                <div class="font-medium text-gray-900">Michael Torres</div>
                                <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">MED</span>
                            </div>
                            <div class="text-sm text-gray-600">Benefits Investigation</div>
                            <div class="text-xs text-gray-500 mt-1">Started: Oct 19, 10:15 AM</div>
                        </div>

                        <div class="task-low-priority p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all">
                            <div class="flex items-center justify-between mb-2">
                                <div class="font-medium text-gray-900">Lisa Chen</div>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">LOW</span>
                            </div>
                            <div class="text-sm text-gray-600">Follow-up Call</div>
                            <div class="text-xs text-gray-500 mt-1">Scheduled: Oct 22, 3:00 PM</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Console (Center) -->
            <div class="lg:col-span-3 order-1 lg:order-2">
                <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4">
                        <h2 class="text-lg font-semibold text-gray-900">AgentForce Console</h2>
                        <div class="flex items-center space-x-4">
                            <div class="text-sm text-gray-600">
                                Current Task: <span class="font-semibold text-blue-600">Welcome Call</span>
                            </div>
                            <div class="w-3 h-3 bg-green-500 rounded-full ai-pulse"></div>
                        </div>
                    </div>

                    <!-- Current Patient Focus -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6 agentforce-glow">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl">
                                    SP
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">Sarah Parker</h3>
                                    <p class="text-sm text-gray-600">New MS Patient â€¢ Tysabri Therapy</p>
                                    <p class="text-xs text-blue-600">Patient ID: SP-2025-001 â€¢ Diagnosed: Oct 20, 2025</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-blue-600 font-medium">AgentForce AI</div>
                                <div class="text-xs text-gray-500">Confidence: 94%</div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Copilot Script -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="brain" class="w-5 h-5 mr-2 text-purple-600"></i>
                            AI Copilot Script - Welcome Call
                        </h3>
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-purple-500">
                            <div class="text-sm text-gray-700 leading-relaxed">
                                <div class="mb-3">
                                    <strong class="text-purple-700">Opening:</strong>
                                    <p class="mt-1">"Hi Sarah, this is Cindy from Biogen Patient Services. I'm calling to welcome you to our Tysabri support program. How are you feeling today?"</p>
                                </div>
                                
                                <div class="mb-3">
                                    <strong class="text-purple-700">Empathy Note:</strong>
                                    <p class="mt-1">Sarah may be feeling overwhelmed with her recent MS diagnosis. Use warm, reassuring tone. She indicated anxiety about therapy in her profile.</p>
                                </div>
                                
                                <div class="mb-3">
                                    <strong class="text-purple-700">Key Discussion Points:</strong>
                                    <ul class="list-disc list-inside ml-4 space-y-1 mt-2">
                                        <li>Explain our comprehensive Tysabri support program</li>
                                        <li>Confirm communication preferences (SMS, mobile app)</li>
                                        <li>Schedule nurse educator call for next week</li>
                                        <li>Discuss infusion site preferences</li>
                                        <li>Address any immediate concerns or questions</li>
                                    </ul>
                                </div>
                                
                                <div class="bg-purple-50 p-3 rounded-lg mt-3">
                                    <strong class="text-purple-700">AI Suggestion:</strong>
                                    <p class="mt-1">Based on Sarah's profile, she prefers SMS notifications and has indicated anxiety about therapy. Emphasize our 24/7 support and gradual onboarding process.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Live Activity Feed -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="activity" class="w-5 h-5 mr-2 text-green-600"></i>
                            Live Activity Feed
                        </h3>
                        <div class="space-y-3 max-h-64 overflow-y-auto">
                            <div class="flex items-start space-x-3 p-3 bg-green-50 rounded-lg border-l-4 border-green-500 notification-slide">
                                <i data-lucide="check-circle" class="w-4 h-4 text-green-600 mt-0.5"></i>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Start Form Processed</div>
                                    <div class="text-xs text-gray-600">AgentForce extracted patient data and created Health Cloud record</div>
                                    <div class="text-xs text-gray-500">2 minutes ago</div>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500 notification-slide">
                                <i data-lucide="phone" class="w-4 h-4 text-blue-600 mt-0.5"></i>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Welcome Call Script Generated</div>
                                    <div class="text-xs text-gray-600">AI Copilot created personalized script based on Sarah's profile and MS diagnosis</div>
                                    <div class="text-xs text-gray-500">Just now</div>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-500 notification-slide">
                                <i data-lucide="clock" class="w-4 h-4 text-yellow-600 mt-0.5"></i>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Benefits Investigation Queued</div>
                                    <div class="text-xs text-gray-600">AgentForce will automatically check Sarah's insurance coverage after welcome call</div>
                                    <div class="text-xs text-gray-500">Next: After call completion</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Phone Number Configuration -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6 border border-blue-200">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="phone" class="w-5 h-5 mr-2 text-blue-600"></i>
                            Contact Configuration
                        </h3>
                        <div class="flex flex-col sm:flex-row gap-3">
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Patient Phone Number</label>
                                <input type="tel" id="patientPhone" placeholder="+1 (555) 123-4567" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Agent Phone Number</label>
                                <input type="tel" id="agentPhone" placeholder="+1 (555) 987-6543" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                        <p class="text-xs text-gray-600 mt-2">Enter real phone numbers for WhatsApp integration</p>
                    </div>

                    <!-- AI Triage System -->
                    <div class="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 mb-6 border border-purple-200">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="brain" class="w-5 h-5 mr-2 text-purple-600"></i>
                            AI Triage System
                        </h3>
                        <div class="text-sm text-gray-700 mb-3">
                            <p class="mb-2">Calls are first handled by AI Agent for:</p>
                            <ul class="list-disc list-inside ml-4 space-y-1">
                                <li>MS disease education & management</li>
                                <li>General therapy questions</li>
                                <li>Side effect information</li>
                                <li>Lifestyle & support resources</li>
                            </ul>
                            <p class="mt-2 text-purple-600 font-medium">Complex queries are routed to live PS agents</p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6">
                        <button id="aiCallBtn" class="bg-purple-600 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 hover:bg-purple-700 transition-colors">
                            <i data-lucide="bot" class="w-4 h-4"></i>
                            <span>AI Agent Call</span>
                        </button>
                        <button id="welcomeCallBtn" class="bg-green-600 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 hover:bg-green-700 transition-colors">
                            <i data-lucide="phone" class="w-4 h-4"></i>
                            <span>Live PS Agent</span>
                        </button>
                        <button id="whatsappCallBtn" class="bg-green-500 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 hover:bg-green-600 transition-colors">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                            </svg>
                            <span>WhatsApp</span>
                        </button>
                    </div>

                    <!-- Vector Database & LLM Integration -->
                    <div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-4 mb-6 border border-emerald-200">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="database" class="w-5 h-5 mr-2 text-emerald-600"></i>
                            AI & Data Integration
                        </h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <h4 class="text-sm font-medium text-gray-700 mb-2">LLM Configuration</h4>
                                <select id="llmProvider" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                                    <option value="openai">OpenAI GPT-4</option>
                                    <option value="anthropic">Anthropic Claude</option>
                                    <option value="azure">Azure OpenAI</option>
                                    <option value="demo">Demo Mode (Simulated)</option>
                                </select>
                            </div>
                            <div>
                                <h4 class="text-sm font-medium text-gray-700 mb-2">Vector Database</h4>
                                <select id="vectorDb" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                                    <option value="pinecone">Pinecone</option>
                                    <option value="weaviate">Weaviate</option>
                                    <option value="chroma">Chroma</option>
                                    <option value="demo">Demo Mode (Local)</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-3 flex items-center space-x-4">
                            <button id="testLLM" class="bg-emerald-600 text-white px-3 py-1 rounded text-sm hover:bg-emerald-700 transition-colors">
                                Test LLM
                            </button>
                            <button id="viewVectorData" class="bg-teal-600 text-white px-3 py-1 rounded text-sm hover:bg-teal-700 transition-colors">
                                View Patient Data
                            </button>
                        </div>
                    </div>

                    <!-- Patient Journey Status -->
                    <div class="bg-white border rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="map" class="w-4 h-4 mr-2 text-indigo-600"></i>
                            Sarah's Journey Status
                        </h3>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
                            <div class="text-center">
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="check" class="w-6 h-6 text-green-600"></i>
                                </div>
                                <div class="text-sm font-medium text-gray-900">Diagnosis</div>
                                <div class="text-xs text-gray-500">Completed</div>
                            </div>
                            <div class="text-center">
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="check" class="w-6 h-6 text-green-600"></i>
                                </div>
                                <div class="text-sm font-medium text-gray-900">Start Form</div>
                                <div class="text-xs text-gray-500">Completed</div>
                            </div>
                            <div class="text-center">
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                    <i data-lucide="phone" class="w-6 h-6 text-blue-600"></i>
                                </div>
                                <div class="text-sm font-medium text-gray-900">Welcome Call</div>
                                <div class="text-xs text-blue-600">In Progress</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // Demo steps for agent view
            const agentSteps = [
                {
                    step: 1,
                    title: "Start Form Received",
                    description: "HCP submitted Sarah's Tysabri start form",
                    status: "completed",
                    action: "AgentForce processed form and created patient record"
                },
                {
                    step: 2,
                    title: "Covered Entity Check",
                    description: "Verify provider eligibility in network",
                    status: "completed",
                    action: "Health Cloud auto-matched HCP NPI and site ID"
                },
                {
                    step: 3,
                    title: "Welcome Call",
                    description: "Call Sarah with AI-generated empathetic script",
                    status: "active",
                    action: "AgentForce Copilot generated personalized script"
                },
                {
                    step: 4,
                    title: "Nurse Education",
                    description: "Schedule nurse educator call",
                    status: "pending",
                    action: "Auto-assign to nurse queue with checklist"
                },
                {
                    step: 5,
                    title: "Site Selection",
                    description: "Help Sarah choose infusion site",
                    status: "pending",
                    action: "AgentForce suggests sites based on location"
                },
                {
                    step: 6,
                    title: "Benefits Investigation",
                    description: "Automated BI & FA workflows",
                    status: "pending",
                    action: "AgentForce triggers BI workflow automatically"
                }
            ];

            let currentStepIndex = 2; // Start at step 3

            // Update display
            function updateAgentDisplay() {
                const step = agentSteps[currentStepIndex];
                document.getElementById('currentStep').textContent = step.step;
                
                // Update status indicators in the top demo controls
                const statusIndicators = document.querySelectorAll('.grid.grid-cols-3.sm\\:grid-cols-6 .text-center');
                statusIndicators.forEach((indicator, index) => {
                    const iconContainer = indicator.querySelector('div:first-child');
                    const icon = indicator.querySelector('i');
                    const statusDiv = indicator.querySelector('.text-xs:last-child');
                    
                    if (index < currentStepIndex) {
                        iconContainer.className = 'w-8 h-8 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2';
                        icon.className = 'w-4 h-4 sm:w-6 sm:h-6 text-green-600';
                        statusDiv.textContent = 'Completed';
                        statusDiv.className = 'text-xs text-gray-500';
                    } else if (index === currentStepIndex) {
                        iconContainer.className = 'w-8 h-8 sm:w-12 sm:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2';
                        icon.className = 'w-4 h-4 sm:w-6 sm:h-6 text-blue-600';
                        statusDiv.textContent = 'Active';
                        statusDiv.className = 'text-xs text-blue-600';
                    } else {
                        iconContainer.className = 'w-8 h-8 sm:w-12 sm:h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-1 sm:mb-2';
                        icon.className = 'w-4 h-4 sm:w-6 sm:h-6 text-gray-400';
                        statusDiv.textContent = 'Pending';
                        statusDiv.className = 'text-xs text-gray-500';
                    }
                });
            }

            // Event listeners
            document.getElementById('nextStep').addEventListener('click', function() {
                if (currentStepIndex < agentSteps.length - 1) {
                    currentStepIndex++;
                    updateAgentDisplay();
                }
            });

            document.getElementById('prevStep').addEventListener('click', function() {
                if (currentStepIndex > 0) {
                    currentStepIndex--;
                    updateAgentDisplay();
                }
            });

            // AI Agent Call Integration
            document.getElementById('aiCallBtn').addEventListener('click', function() {
                // Simulate AI Agent handling the call first
                this.innerHTML = '<i data-lucide="bot" class="w-4 h-4"></i><span>AI Agent Active...</span>';
                this.classList.remove('bg-purple-600', 'hover:bg-purple-700');
                this.classList.add('bg-blue-600', 'hover:bg-blue-700');
                
                // Show AI Agent simulation
                setTimeout(() => {
                    const aiResponse = `ðŸ¤– AI Agent Response:

"Hello Sarah! I'm your AI assistant for MS and Tysabri therapy support. I can help you with:

â€¢ MS disease education and management
â€¢ General therapy questions and side effects
â€¢ Lifestyle tips and support resources
â€¢ Basic infusion information

I've analyzed your query and can provide immediate answers to your MS-related questions. For complex issues like Benefits Investigation, Prior Authorization, or specific infusion scheduling, I'll connect you with Cindy, your dedicated Patient Services Agent.

Would you like me to answer your MS questions first, or shall I transfer you directly to Cindy for administrative support?"`;
                    
                    alert(aiResponse);
                    
                    // Show routing option
                    const routeToAgent = confirm("Would you like to be transferred to Cindy (Live PS Agent) for Benefits Investigation, Prior Authorization, or Infusion details?");
                    
                    if (routeToAgent) {
                        alert("Transferring to Cindy Smith, your Patient Services Agent...\n\nCindy will handle:\nâ€¢ Benefits Investigation\nâ€¢ Prior Authorization\nâ€¢ Infusion scheduling\nâ€¢ Insurance coordination\nâ€¢ Copay assistance");
                        
                        // Reset AI button and highlight live agent button
                        this.innerHTML = '<i data-lucide="bot" class="w-4 h-4"></i><span>AI Agent Call</span>';
                        this.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                        this.classList.add('bg-purple-600', 'hover:bg-purple-700');
                        
                        // Highlight the live agent button
                        const liveAgentBtn = document.getElementById('welcomeCallBtn');
                        liveAgentBtn.classList.add('ring-4', 'ring-green-300', 'animate-pulse');
                        setTimeout(() => {
                            liveAgentBtn.classList.remove('ring-4', 'ring-green-300', 'animate-pulse');
                        }, 5000);
                    } else {
                        // Continue with AI
                        alert("Continuing with AI Agent support for your MS questions...");
                        this.innerHTML = '<i data-lucide="bot" class="w-4 h-4"></i><span>AI Agent Call</span>';
                        this.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                        this.classList.add('bg-purple-600', 'hover:bg-purple-700');
                    }
                }, 2000);
            });

            // WhatsApp Integration
            document.getElementById('welcomeCallBtn').addEventListener('click', function() {
                // Simulate starting a welcome call
                this.innerHTML = '<i data-lucide="phone-off" class="w-4 h-4"></i><span>Call in Progress...</span>';
                this.classList.remove('bg-green-600', 'hover:bg-green-700');
                this.classList.add('bg-red-600', 'hover:bg-red-700');
                
                // Show call simulation
                setTimeout(() => {
                    alert('Welcome call simulation: Cindy is now calling Sarah Parker using the AI-generated script. The call will last approximately 8-10 minutes.');
                    this.innerHTML = '<i data-lucide="phone" class="w-4 h-4"></i><span>Start Welcome Call</span>';
                    this.classList.remove('bg-red-600', 'hover:bg-red-700');
                    this.classList.add('bg-green-600', 'hover:bg-green-700');
                }, 2000);
            });

            // LLM Integration with Interactive Chat
            document.getElementById('testLLM').addEventListener('click', function() {
                const provider = document.getElementById('llmProvider').value;
                const vectorDb = document.getElementById('vectorDb').value;
                
                // Create interactive chat modal
                const chatModal = createInteractiveChatModal(provider, vectorDb);
                document.body.appendChild(chatModal);
                
                // Show modal
                setTimeout(() => {
                    chatModal.style.display = 'flex';
                }, 100);
            });

            function createInteractiveChatModal(provider, vectorDb) {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.style.display = 'none';
                
                const patientProfile = {
                    name: "Sarah",
                    age: 34,
                    diagnosis: "Relapsing-Remitting MS",
                    therapy: "Tysabri",
                    diagnosisDate: "October 20, 2025",
                    concerns: ["anxiety", "new diagnosis", "therapy expectations"],
                    preferences: ["SMS notifications", "gradual information"]
                };

                const responses = {
                    'ms_questions': [
                        "I understand you're newly diagnosed with MS, Sarah. Multiple Sclerosis is when your immune system mistakenly attacks the protective covering of your nerves. Think of it like the insulation around electrical wires - when it's damaged, signals don't travel as smoothly.",
                        "MS symptoms can vary widely from person to person. Some common ones include fatigue (which can be quite overwhelming), numbness or tingling in your limbs, vision changes, and sometimes difficulty with balance or coordination. What specific symptoms are you experiencing?",
                        "The good news is that MS treatment has come a long way. With early treatment like Tysabri, many people with MS live active, fulfilling lives. Your neurologist chose Tysabri because it's very effective at reducing relapses and slowing disease progression."
                    ],
                    'therapy_questions': [
                        "Tysabri works by keeping certain immune cells from crossing into your brain and spinal cord where they can cause damage. It's like having a security guard that prevents the 'bad' immune cells from getting to your nervous system.",
                        "Most people tolerate Tysabri very well. You might experience some mild side effects like headache, fatigue, or a cold-like feeling after your infusion. These usually improve within a day or two. The serious side effect we monitor for is very rare but important to be aware of.",
                        "Your infusions will be every 4 weeks (28 days). Each visit usually takes about 2-3 hours total - about an hour for the actual infusion, plus some observation time. Many patients bring a book, music, or even work on their laptops during the infusion."
                    ],
                    'lifestyle_questions': [
                        "Exercise is actually one of the best things you can do for MS! Even gentle activities like walking, swimming, or yoga can help with fatigue, mood, and overall well-being. Start slowly - even 10-15 minutes a day can make a difference.",
                        "There's no specific 'MS diet,' but many patients find that eating anti-inflammatory foods helps. Think Mediterranean-style eating - lots of fruits, vegetables, fish, and healthy fats. Vitamin D is also important - many MS patients are deficient, so your doctor might recommend supplements.",
                        "Managing stress is crucial with MS because stress can trigger symptoms. Techniques like meditation, deep breathing, or even just taking regular breaks can help. Don't underestimate the power of talking to someone - whether it's a counselor, support group, or trusted friend."
                    ],
                    'general_support': [
                        "Sarah, I want you to know that it's completely normal to feel overwhelmed right now. You've just received life-changing news, and it's okay to have mixed emotions. Many patients tell me they felt the same way at first.",
                        "You're not alone in this journey. There's a whole community of people with MS who understand exactly what you're going through. Your Patient Services team is here 24/7 to support you - whether you have questions, concerns, or just need someone to talk to.",
                        "Take things one step at a time. You don't have to understand everything about MS today. Focus on what you need to know right now - like your first infusion appointment. We'll be here to guide you through each step of your journey."
                    ]
                };
                
                modal.innerHTML = `
                    <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col">
                        <!-- Header -->
                        <div class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-t-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-lg font-semibold">ðŸ¤– AI Assistant (${provider === 'openai' ? 'GPT-4' : provider === 'anthropic' ? 'Claude-3' : 'Demo Mode'})</h3>
                                    <p class="text-sm opacity-90">Connected to ${vectorDb === 'pinecone' ? 'Pinecone' : vectorDb === 'weaviate' ? 'Weaviate' : 'Demo'} Vector DB</p>
                                </div>
                                <button id="closeChatModal" class="text-white hover:text-gray-300 text-2xl">&times;</button>
                            </div>
                        </div>
                        
                        <!-- Chat Area -->
                        <div class="flex-1 p-4 overflow-y-auto bg-gray-50" id="chatArea" style="max-height: 400px;">
                            <div class="space-y-4">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold">AI</div>
                                    <div class="bg-white rounded-lg p-3 shadow-sm max-w-xs">
                                        <p class="text-sm text-gray-800">Hello Sarah! I'm your AI assistant for MS and Tysabri therapy support. I can help you with:</p>
                                        <ul class="text-xs text-gray-600 mt-2 space-y-1">
                                            <li>â€¢ MS disease education</li>
                                            <li>â€¢ Therapy information</li>
                                            <li>â€¢ Lifestyle tips</li>
                                            <li>â€¢ General support</li>
                                        </ul>
                                        <p class="text-xs text-gray-600 mt-2">What would you like to know about?</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="p-4 bg-white border-t">
                            <div class="grid grid-cols-2 gap-2 mb-3">
                                <button class="quick-action-btn bg-blue-100 text-blue-800 text-xs py-2 px-3 rounded-lg hover:bg-blue-200 transition-colors" data-category="ms_questions">MS Education</button>
                                <button class="quick-action-btn bg-green-100 text-green-800 text-xs py-2 px-3 rounded-lg hover:bg-green-200 transition-colors" data-category="therapy_questions">Therapy Info</button>
                                <button class="quick-action-btn bg-yellow-100 text-yellow-800 text-xs py-2 px-3 rounded-lg hover:bg-yellow-200 transition-colors" data-category="lifestyle_questions">Lifestyle Tips</button>
                                <button class="quick-action-btn bg-purple-100 text-purple-800 text-xs py-2 px-3 rounded-lg hover:bg-purple-200 transition-colors" data-category="general_support">General Support</button>
                            </div>
                            
                            <!-- Input Area -->
                            <div class="flex space-x-2">
                                <input type="text" id="chatInput" placeholder="Ask me anything about MS or Tysabri..." 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                <button id="sendMessage" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors">
                                    Send
                                </button>
                            </div>
                            
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-xs text-gray-500">Powered by ${provider} + ${vectorDb}</span>
                                <button id="transferToAgent" class="bg-green-600 text-white text-xs py-1 px-3 rounded-lg hover:bg-green-700 transition-colors">
                                    Transfer to Live Agent
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                // Add event listeners
                const closeBtn = modal.querySelector('#closeChatModal');
                const sendBtn = modal.querySelector('#sendMessage');
                const chatInput = modal.querySelector('#chatInput');
                const quickActions = modal.querySelectorAll('.quick-action-btn');
                const transferBtn = modal.querySelector('#transferToAgent');
                const chatArea = modal.querySelector('#chatArea');
                
                closeBtn.addEventListener('click', () => {
                    modal.style.display = 'none';
                    document.body.removeChild(modal);
                });
                
                // Quick action buttons
                quickActions.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const category = btn.dataset.category;
                        const response = responses[category][Math.floor(Math.random() * responses[category].length)];
                        addMessage('user', btn.textContent);
                        setTimeout(() => {
                            addMessage('ai', response);
                        }, 1000);
                    });
                });
                
                // Send message
                const sendMessage = () => {
                    const message = chatInput.value.trim();
                    if (message) {
                        addMessage('user', message);
                        chatInput.value = '';
                        
                        // Simulate AI thinking
                        setTimeout(() => {
                            const aiResponse = generateAIResponse(message);
                            addMessage('ai', aiResponse);
                        }, 1500);
                    }
                };
                
                sendBtn.addEventListener('click', sendMessage);
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') sendMessage();
                });
                
                // Transfer to agent
                transferBtn.addEventListener('click', () => {
                    addMessage('ai', "I'm transferring you to Cindy, your Patient Services Agent. She can help with Benefits Investigation, Prior Authorization, and Infusion scheduling.");
                    setTimeout(() => {
                        modal.style.display = 'none';
                        document.body.removeChild(modal);
                        alert('Transferring to Cindy Smith, your Patient Services Agent...');
                    }, 2000);
                });
                
                function addMessage(sender, message) {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `flex items-start space-x-3 ${sender === 'user' ? 'justify-end' : ''}`;
                    
                    if (sender === 'user') {
                        messageDiv.innerHTML = `
                            <div class="bg-blue-600 text-white rounded-lg p-3 shadow-sm max-w-xs">
                                <p class="text-sm">${message}</p>
                            </div>
                            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">U</div>
                        `;
                    } else {
                        messageDiv.innerHTML = `
                            <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold">AI</div>
                            <div class="bg-white rounded-lg p-3 shadow-sm max-w-xs">
                                <p class="text-sm text-gray-800">${message}</p>
                            </div>
                        `;
                    }
                    
                    chatArea.appendChild(messageDiv);
                    chatArea.scrollTop = chatArea.scrollHeight;
                }
                
                function generateAIResponse(userMessage) {
                    const message = userMessage.toLowerCase();
                    const currentTime = new Date().toLocaleTimeString();
                    
                    // Personalized responses based on patient profile and specific questions
                    if (message.includes('scared') || message.includes('afraid') || message.includes('worried') || message.includes('anxiety')) {
                        return `I completely understand why you might feel scared, Sarah. Being diagnosed with MS is overwhelming, and it's natural to worry about the future. Many patients tell me they felt the same way at first. The good news is that with treatments like Tysabri, most people with MS live very normal, active lives. Would you like to talk about what specific concerns are keeping you up at night?`;
                    }
                    
                    if (message.includes('symptoms') || message.includes('fatigue') || message.includes('tired')) {
                        return `Fatigue is one of the most common MS symptoms, and it can be really challenging. It's not just regular tiredness - it's more like having your battery drained even after a good night's sleep. Some patients find that scheduling rest periods, staying cool, and gentle exercise actually help with energy levels. Are you experiencing fatigue, and if so, what time of day is it worst?`;
                    }
                    
                    if (message.includes('side effects') || message.includes('pml') || message.includes('risks')) {
                        return `I'm glad you're asking about side effects - it shows you're being proactive about your health. Tysabri is generally very well tolerated. Most patients might have mild reactions like headache or feeling a bit under the weather after the infusion, but these usually pass quickly. The rare serious side effect we monitor for (PML) affects less than 1% of patients, and we have excellent screening tools to catch it early if it ever occurs.`;
                    }
                    
                    if (message.includes('infusion') || message.includes('needle') || message.includes('iv')) {
                        return `I know some people are nervous about infusions, but most patients find them much easier than expected. The nurses who do Tysabri infusions are experts - they do this all the time and know how to make you comfortable. The needle goes into your arm, and then you can relax for about an hour. Many patients bring books, work on laptops, or even take a nap. Some infusion centers even have reclining chairs and Netflix!`;
                    }
                    
                    if (message.includes('work') || message.includes('job') || message.includes('career')) {
                        return `Many people with MS continue working successfully throughout their careers. The key is being open with your employer about any accommodations you might need - things like flexible hours during infusion days, or a cooler workspace if heat affects your symptoms. Tysabri is actually great for working people because it's only once a month, so minimal disruption to your schedule.`;
                    }
                    
                    if (message.includes('family') || message.includes('kids') || message.includes('children')) {
                        return `MS doesn't have to change your family life in major ways. Many people with MS are wonderful parents and partners. It's important to be honest with your family about what you're going through - they want to support you. Kids are often more understanding than we give them credit for. You might find that being open about your MS actually brings your family closer together.`;
                    }
                    
                    if (message.includes('future') || message.includes('prognosis') || message.includes('long term')) {
                        return `I understand wanting to know what the future holds, Sarah. The truth is, MS affects everyone differently, and with treatments like Tysabri, many people live decades without major disability. The key is starting treatment early (which you're doing!) and staying consistent with your therapy. Focus on what you can control - taking your medication, staying healthy, and maintaining a positive outlook.`;
                    }
                    
                    if (message.includes('ms') || message.includes('multiple sclerosis')) {
                        return `Multiple Sclerosis is when your immune system mistakenly attacks the protective covering around your nerves. Think of it like the insulation around electrical wires - when it gets damaged, the signals don't travel as smoothly. The good news is that your immune system is learning to recognize this mistake, and treatments like Tysabri help prevent further damage. What would you like to know more about - how it affects your body, or how the treatment works?`;
                    }
                    
                    if (message.includes('therapy') || message.includes('tysabri') || message.includes('treatment')) {
                        return `Tysabri is a really effective treatment for MS. It works by preventing certain immune cells from crossing into your brain and spinal cord where they can cause damage. It's like having a bouncer at the door of your nervous system - keeping the troublemakers out while letting the good guys do their job. Most people see a significant reduction in relapses within the first few months of treatment.`;
                    }
                    
                    if (message.includes('exercise') || message.includes('gym') || message.includes('workout')) {
                        return `Exercise is actually one of the best medicines for MS! It helps with fatigue, mood, balance, and overall well-being. You don't need to run marathons - even gentle activities like walking, swimming, or yoga can make a big difference. Start slow and listen to your body. Many patients find that regular exercise actually gives them more energy, not less. What kind of activities do you enjoy?`;
                    }
                    
                    if (message.includes('diet') || message.includes('food') || message.includes('eating')) {
                        return `While there's no specific "MS diet," many patients find that eating anti-inflammatory foods helps with their symptoms. Think Mediterranean-style eating - lots of fruits, vegetables, fish, nuts, and olive oil. Vitamin D is especially important for people with MS, so your doctor might recommend supplements. The key is eating a balanced, nutritious diet that makes you feel good.`;
                    }
                    
                    if (message.includes('stress') || message.includes('anxiety') || message.includes('worry')) {
                        return `Stress management is crucial with MS because stress can actually trigger symptoms. Different techniques work for different people - some like meditation or deep breathing, others prefer talking to friends, counseling, or even just taking regular breaks throughout the day. What usually helps you feel calmer? We can work on building those stress-management tools into your daily routine.`;
                    }
                    
                    if (message.includes('support') || message.includes('help') || message.includes('alone')) {
                        return `You're definitely not alone in this, Sarah. There's a whole community of people with MS who understand exactly what you're going through. Your Patient Services team is here 24/7 to support you - whether you have medical questions, need help with insurance, or just want to talk to someone who understands. Many patients also find support groups helpful, either online or in person.`;
                    }
                    
                    if (message.includes('insurance') || message.includes('cost') || message.includes('expensive')) {
                        return `I know the cost of MS treatments can be concerning. The good news is that most insurance plans cover Tysabri, and we have programs to help with copays and other costs. Our Patient Services team specializes in helping patients navigate insurance and financial assistance programs. Don't let cost concerns prevent you from getting the treatment you need - let's talk about your specific situation.`;
                    }
                    
                    // Default intelligent response
                    return `That's a thoughtful question, Sarah. I can help you with information about MS, Tysabri therapy, managing symptoms, lifestyle tips, or emotional support. Could you tell me more specifically what's on your mind? For example, are you wondering about side effects, how the infusion process works, or maybe how to talk to your family about your diagnosis?`;
                }
                
                return modal;
            }

            // Vector Database Viewer
            document.getElementById('viewVectorData').addEventListener('click', function() {
                const vectorDb = document.getElementById('vectorDb').value;
                
                const patientData = `ðŸ“Š Patient Longitudinal Data (${vectorDb}):

ðŸ‘¤ Sarah Parker (SP-2025-001):
â€¢ Total Interactions: 8
â€¢ Last Contact: Oct 21, 2025
â€¢ Sentiment Trend: Improving (+15%)
â€¢ Key Topics: MS education, therapy anxiety, infusion scheduling
â€¢ Risk Factors: High anxiety, new diagnosis
â€¢ Success Metrics: 85% satisfaction, 90% adherence

ðŸ“ˆ Interaction History:
1. Oct 20: Initial diagnosis call (Anxiety: High)
2. Oct 21: Welcome call (Anxiety: Medium)
3. Oct 22: Nurse education scheduled
4. Oct 25: First infusion scheduled

ðŸŽ¯ AI Insights:
â€¢ Patient responds well to empathetic communication
â€¢ Prefers SMS notifications over calls
â€¢ Benefits from gradual information delivery
â€¢ Strong family support system

ðŸ”® Predictive Analytics:
â€¢ Adherence Risk: Low (15%)
â€¢ Satisfaction Score: 92%
â€¢ Next Best Action: Schedule nurse education call`;
                
                alert(patientData);
            });

            document.getElementById('whatsappCallBtn').addEventListener('click', function() {
                const patientPhone = document.getElementById('patientPhone').value.trim();
                const agentPhone = document.getElementById('agentPhone').value.trim();
                
                if (!patientPhone) {
                    alert('Please enter a valid patient phone number in the Contact Configuration section above.');
                    document.getElementById('patientPhone').focus();
                    return;
                }
                
                // Clean and validate phone number
                const cleanPatientPhone = patientPhone.replace(/\D/g, '');
                if (cleanPatientPhone.length < 10) {
                    alert('Please enter a valid phone number with at least 10 digits.');
                    document.getElementById('patientPhone').focus();
                    return;
                }
                
                // Open WhatsApp with pre-filled message
                const message = encodeURIComponent(`Hi Sarah! This is Cindy from Biogen Patient Services. I'm calling to welcome you to our Tysabri support program. How are you feeling today? 

I'd like to:
â€¢ Explain our comprehensive Tysabri support program
â€¢ Confirm your communication preferences (SMS, mobile app)
â€¢ Schedule your nurse educator call for next week
â€¢ Discuss your infusion site preferences
â€¢ Address any immediate concerns or questions

We're here to support you every step of the way! ðŸ’™`);
                
                const whatsappUrl = `https://wa.me/${cleanPatientPhone}?text=${message}`;
                window.open(whatsappUrl, '_blank');
                
                // Show confirmation
                this.innerHTML = '<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/></svg><span>Opening WhatsApp...</span>';
                
                setTimeout(() => {
                    this.innerHTML = '<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/></svg><span>WhatsApp</span>';
                }, 3000);
            });

            // Initialize
            updateAgentDisplay();
        });
    </script>
</body>
</html>
